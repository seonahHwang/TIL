# 3장. HTTP 정보는 HTTP 메시지에 있다

# 3.2 리퀘스트 메시지와 리스폰스 메시지의 구조

메시지 헤더 내부

- 리퀘스트 라인
- 상태 라인
- 헤더 필드

# 3.3 인코딩으로 전송 효율을 높이다

## 3.3.1 메시지 바디와 엔티티 바디의 차이

- 메시지

HTTP 통신의 기본 단위.

옥텟 시퀀스로 구성되고 통신을 통해 전송됨

- 엔티티

리퀘스트랑 리스폰스의 페이로드(부가물)로 전송되는 정보

엔티티 헤더 필드 + 엔티티 헤더 바디로 구성


HTTP 메시지 바디의 역할은 리퀘스트랑 리스폰스에 관한 엔티티 바디를 운반하는 일

메시지바디와 엔티티 바디는 같지만 전송 코딩이 적용된 경우에는 엔티티 바디의 내용이 변화

# 3.3.2 압축해서 보내는 콘텐츠 코딩

엔티티에 적용하는 인코딩

엔티티 정보를 유지한채로 압축

# 3.3.3 분해해서 보내는 청크 전송 코딩

사이즈가 큰 데이터를 전송할 때 엔티티 바디를 분할하는 기능

# 3.4 여러 데이터를 보내는 멀티파트

MIME 

이미지 등의 바이너리 데이터를 아스키 문자열에 인코딩하는 방법,

데이터 종류를 나타내는 방법 규정 

HTTP 메시지로 멀티파트 사용 방법 2가지 

`multipart/form-data`

Web 폼으로부터 파일 업로드에 사용됩니다. 

`multipart/byteranges`

상태 코드 206 리스폰스 메시지가 복수 범위의 내용을 포함하는 때에 사용

멀티파트 각각의 엔티티를 구분하기 위해 `boundary` 문자열 사용 

멀티파트는 파트마다 헤더 필드 포함 

# 3.5 일부분만 받는 레인지 리퀘스트

대용량 다운로드의 경우, 예전에는 한 번에 다운받을 수 없어서 나눠서 받음 

엔티티의 범위를 지정해서 다운로드 

레인지 리퀘스트 : 범위를 지정하여 리퀘스트 하는 것 

아래 처럼 byte를 지정

`Range:bytes = 5001-10000`

# 3.6 최적의 콘텐츠를 돌려주는 콘텐츠 네고시에이션

내용은 같지만 영어판/ 한국판 같이 표시되는 언어가 서로 다른 웹페이지 

언어, 문자세트, 인코딩 방식으로 리소스 제공

판단 기준은

```bash
Accept
Accept-Charset
Accept-Encoding
Accept-Language
Content-Language
```

### 콘텐츠 네고시에이션 종류

1. 서버 구동형 네고시에이션

    서버 측에서 콘텐츠 네고시에이션 하는 방식

    리퀘스트헤더 필드를 참고해서 자동적으로 처리

2. 에이전트 구동형 네고시에이션 

    클라이언트측에서 콘텐츠 네고시에이션

    브라우저에 표시된 선택지 중에 유저가 수동으로 선택

    또는 js로 웹페이지에서 자동적으로 정하는 경우 

3. 트랜스페어런트 네고시에이션

    서버/클라이언트 각각 콘텐츠 네고시에이션

